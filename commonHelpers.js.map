{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// axios\nimport axios from 'axios';\n\nexport default  async function fetchPictures (URL,params) {\n  return  await axios.get(URL,params)\n  .then((response) => {\n    return response.data;\n  })\n  .catch(error => {\n    console.log(error);\n})\n\n}\n\n\n\n\n\n","export default function setGallery(data, selector) {\n  const gallery = data.reduce((acc, item) => {\n    const {\n      likes,\n      views,\n      comments,\n      downloads,\n      tags,\n      previewURL,\n      largeImageURL,\n      webformatURL,\n    } = item;\n    acc += `<li class='gallery-item'>\n                  <a class='gallery-link' href= ${largeImageURL}>\n                    <img class=\"gallery-image\" src=${webformatURL} alt =\"${tags}\" width =\"360\" height =\"152\">\n                    </a>\n                      <div class =\"conteiner-comments\">\n                        <div class= \"container-comment\">\n                          <span class=\"comments-name\">Likes</span>\n                          <span class =\"comments-value\"> ${likes}</span>\n                        </div>\n                        <div class= \"container-comment\">\n                          <span class=\"comments-name\">Views</span>\n                          <span class =\"comments-value\"> ${views}</span>\n                        </div>\n                        <div class= \"container-comment\">\n                          <span class=\"comments-name\">Comments</span>\n                          <span class =\"comments-value\"> ${comments}</span>\n                         </div>\n                        <div class= \"container-comment\">\n                          <span class=\"comments-name\">Downloads</span>\n                          <span class =\"comments-value\"> ${downloads}</span>\n                        </div> \n                      </div>\n                      </li>`;\n    return acc;\n  }, '');\n\n  document.querySelector(selector).innerHTML += gallery;\n  \n return  document.querySelector(\"img\").getBoundingClientRect().height;\n \n\n}\n","// IMPORT\nimport fetchPictures from './js/pixabay-api.js';\nimport setGallery from './js/render-functions.js';\n// iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// axios\nimport axios from 'axios';\n\n// VARIABLE\n// VARIABLE DOM\nconst formSearch = document.querySelector('.form-search');\nconst inputSearch = document.querySelector('.input-search');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnContinue = document.querySelector('.btn-continue');\nconst galleryImg = document.querySelector('img');\n\nloader.style.display = 'none';\n\n// VARIABLE API\nconst API_KEY = '15611929-f0ad527e9fe4615e5eed3c151';\nconst urlApi = `https://pixabay.com/api/?`;\n\nlet heightScroll;\nlet page = 1;\nlet totalHits;\nconst perPages = 15;\nlet totalPages;\n\nconst params = {\n  key: API_KEY,\n  q: inputSearch.value,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: perPages,\n  page: page,\n};\n\n// FUNCTION\nfunction errorMessage(data) {\n  iziToast.error({\n    // title: 'Error:',\n    message: data,\n    position: 'topRight',\n    messageColor: 'white',\n    backgroundColor: 'rgb(238, 4, 50)',\n    theme: 'dark',\n    color: 'red',\n    maxWidth: '432',\n    messageSize: '16',\n    titleSize: '16',\n    progressBar: false,\n  });\n}\n\nfunction warningMessage(data) {\n  iziToast.error({\n    // title: 'Caution',\n    message: data,\n    position: 'topRight',\n    messageColor: 'white',\n    backgroundColor: \"#4e75ff\",\n    theme: 'dark',\n    color: 'red',\n    maxWidth: '432',\n    messageSize: '16',\n    titleSize: '16',\n    progressBar: false,\n  });\n}\n\nconst lightbox = new SimpleLightbox('.gallery .gallery-item a', {\n  captionSelector: 'img',\n  captions: true,\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  overlayOpacity: 1,\n  className: 'custom-lightbox',\n  docClose: true,\n  animationSpeed: 500,\n  fadeSpeed: 500,\n  rtl: true,\n});\n\n// CODE\nbtnContinue.style.display = 'none';\n\nloader.style.display = 'none';\nformSearch.addEventListener('submit', event => {\n  event.preventDefault();\n  btnContinue.style.display = 'none';\n  gallery.textContent = '';\n  params.q = inputSearch.value;\n  params.page = 1;\n\n  if (inputSearch.value.trim() === '' || inputSearch.value.trim() === ' ') {\n    const messsage = 'please, fill the search request';\n    errorMessage(messsage);\n    return;\n  } else {\n    loader.style.display = 'block';\n    fetchPictures(urlApi, { params }).then(users => {\n      if (users.hits.length === 0) {\n        loader.style.display = 'none';\n        const messsage = `Sorry, there are no images matching your search query.\n                 Please try again!`;\n        errorMessage(messsage);\n        inputSearch.value = '';\n      } else {\n        totalHits = users.total;\n        totalPages = Math.ceil(totalHits / perPages);\n\n        loader.style.display = 'none';\n        heightScroll = setGallery(users.hits, '.gallery');\n        window.scrollBy(0, heightScroll);\n\n        lightbox.refresh();\n\n        // if (users.hits.length > perPages || page < totalPages) {\n        //   btnContinue.style.display = 'block';\n        // }\n\n        if (users.total <= perPages ) {\n          // btnContinue.style.display = 'block';\n          const messsage =\n            'We\"re sorry, but you\"ve reached the end of search results.';\n          warningMessage(messsage);\n        } else {\n          btnContinue.style.display = 'block';\n        }\n      }\n      page = 1;\n    });\n  }\n});\n\nbtnContinue.addEventListener('click', event => {\n  if (page >= totalPages) {\n    const messsage =\n      'We\"re sorry, but you\"ve reached the end of search results.';\n      warningMessage(messsage);\n    btnContinue.style.display = 'none';\n  } else {\n    console.log(page);\n\n    page += 1;\n    params.page = page;\n    console.log(params.page);\n    loader.style.display = 'block';\n\n    fetchPictures(urlApi, { params }).then(users => {\n      setGallery(users.hits, '.gallery');\n      window.scrollBy(0, heightScroll);\n\n      lightbox.refresh();\n      loader.style.display = 'none';\n    });\n  }\n});\n\nbtnContinue.style.display = 'none';\n"],"names":["fetchPictures","URL","params","axios","response","error","setGallery","data","selector","gallery","acc","item","likes","views","comments","downloads","tags","previewURL","largeImageURL","webformatURL","formSearch","inputSearch","loader","btnContinue","API_KEY","urlApi","heightScroll","page","totalHits","perPages","totalPages","errorMessage","iziToast","warningMessage","lightbox","SimpleLightbox","event","users"],"mappings":"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"}